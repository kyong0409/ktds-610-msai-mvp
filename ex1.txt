FastAPI 앱 배포 팁
FastAPI 앱 배포는 로컬에서 uvicorn main:app --reload로 테스트부터. 코드 기본은 from fastapi import FastAPI, Depends; app = FastAPI(); @app.get("/") async def root(): return {"message": "Hello World"}. 의존성은 from fastapi.security import OAuth2PasswordBearer; oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token"). 쿠버네티스 배포하려면 Dockerfile에 FROM tiangolo/uvicorn-gunicorn-fastapi:python3.9, COPY . /app, CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "80"] 작성 후 docker build -t yourimage . 하고 push to registry (Azure ACR나 Docker Hub). YAML 매니페스트는 apiVersion: apps/v1, kind: Deployment, spec: replicas: 2, template: spec: containers: - name: app, image: yourimage, ports: - containerPort: 80. Service는 type: LoadBalancer로. 환경 변수는 ConfigMap이나 Secret으로, 예를 들어 kubectl create secret generic api-secrets --from-literal=API_KEY=yourkey. CORS는 from fastapi.middleware.cors import CORSMiddleware; app.add_middleware(CORSMiddleware, allow_origins=["*"]). LangChain 툴 연동은 @app.post("/chain")에 chain.run(input) 넣으면 되는데, OpenAI 키 관리 주의. 서버 다운 안 되게 livenessProbe 추가, 헬름은 fastapi helm chart 검색해서 (Kubernetes 관련).